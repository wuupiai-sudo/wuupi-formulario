<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Wuupi â€” Sistema de Co-diseÃ±o</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; max-width: 900px; margin: auto; }
    h2 { color: #2f4f4f; margin-top: 30px; }
    h3 { margin-top: 20px; }
    .bloque { display: none; margin-top: 10px; padding: 10px; border: 1px solid #ccc; border-radius: 5px; }
    label { display: block; margin: 5px 0; }
    button { margin-top: 15px; padding: 10px 15px; font-size: 1em; }
    textarea { width: 100%; min-height: 60px; }
  </style>
</head>
<body>
  <h1>ğŸ§­ Wuupi â€” Sistema de Co-diseÃ±o</h1>
  <h2>Educadores de EducaciÃ³n Especial</h2>

  <form id="wuupi-form" action="https://script.google.com/macros/s/AKfycbxzxZRAK9fQmRJcQGtKtmGeCZmXDzXA_plFh0e4XYqfvkwQrhyzIdaiEsIpqWykxGGmCQ/exec" method="post" target="hidden_iframe">

    <!-- 1. Dolor principal -->
    <h2>1. Dolor principal</h2>
    <p>Si Wuupi solo pudiera ayudarte en UNA cosa, Â¿cuÃ¡l elegirÃ­as?<br>(elige la que mÃ¡s se parece a tu problema real)</p>
    <label><input type="radio" name="dolor_principal" value="A"> Actividades de aprendizaje adaptadas<br>
      <small>â€œNo siempre sÃ© cÃ³mo enseÃ±ar estos contenidos a alumnos con discapacidadâ€</small>
    </label>
    <label><input type="radio" name="dolor_principal" value="B"> InteracciÃ³n activa<br>
      <small>â€œMe cuesta que mis alumnos se involucren, respondan o interactÃºen.â€</small>
    </label>
    <label><input type="radio" name="dolor_principal" value="C"> Evaluar progreso<br>
      <small>â€œNo tengo una forma clara de saber o demostrar si estÃ¡n mejorandoâ€</small>
    </label>
    <label><input type="radio" name="dolor_principal" value="D"> Comunicar avances<br>
      <small>â€œMe cuesta explicar a familias y escuela lo que realmente han avanzadoâ€</small>
    </label>

    <!-- 2. Co-diseÃ±o adaptativo: Bloques condicionales -->
    <div id="bloque-A" class="bloque">
      <h3>A. Actividades de aprendizaje adaptadas</h3>
      <label>1. Â¿QuÃ© tipo de contenidos te cuesta mÃ¡s adaptar?
        <input type="checkbox" name="A_contenido" value="Lectura"> Lectura
        <input type="checkbox" name="A_contenido" value="MatemÃ¡ticas"> MatemÃ¡ticas
        <input type="checkbox" name="A_contenido" value="ComunicaciÃ³n"> ComunicaciÃ³n
        <input type="checkbox" name="A_contenido" value="Habilidades sociales"> Habilidades sociales
        <input type="checkbox" name="A_contenido" value="AutonomÃ­a"> AutonomÃ­a
      </label>
      <label>2. Â¿CuÃ¡l es la mayor dificultad al enseÃ±arlos?
        <input type="checkbox" name="A_dificultad" value="No responden"> No responden
        <input type="checkbox" name="A_dificultad" value="Se frustran"> Se frustran
        <input type="checkbox" name="A_dificultad" value="Se distraen"> Se distraen
        <input type="checkbox" name="A_dificultad" value="No puedo ajustar al nivel"> No puedo ajustar al nivel
        <input type="checkbox" name="A_dificultad" value="No tengo materiales adecuados"> No tengo materiales adecuados
      </label>
      <label>3. Si Wuupi lo resolviera bien, Â¿quÃ© deberÃ­a hacer por ti?
        <textarea name="A_solucion"></textarea>
      </label>
    </div>

    <div id="bloque-B" class="bloque">
      <h3>B. InteracciÃ³n activa</h3>
      <label>1. Â¿QuÃ© tipo de interacciÃ³n es mÃ¡s difÃ­cil?
        <input type="checkbox" name="B_tipo" value="Movimientos grandes"> Movimientos grandes
        <input type="checkbox" name="B_tipo" value="Movimientos finos"> Movimientos finos
        <input type="checkbox" name="B_tipo" value="SeÃ±alar"> SeÃ±alar
        <input type="checkbox" name="B_tipo" value="Elegir"> Elegir
        <input type="checkbox" name="B_tipo" value="Mantener atenciÃ³n"> Mantener atenciÃ³n
      </label>
      <label>2. Â¿Por quÃ© crees que no interactÃºan?
        <input type="checkbox" name="B_causa" value="LimitaciÃ³n motriz"> LimitaciÃ³n motriz
        <input type="checkbox" name="B_causa" value="Falta de motivaciÃ³n"> Falta de motivaciÃ³n
        <input type="checkbox" name="B_causa" value="No entienden"> No entienden
        <input type="checkbox" name="B_causa" value="Se cansan"> Se cansan
        <input type="checkbox" name="B_causa" value="Se frustran"> Se frustran
      </label>
      <label>3. Â¿QuÃ© deberÃ­a detectar o registrar Wuupi?
        <textarea name="B_solucion"></textarea>
      </label>
    </div>

    <div id="bloque-C" class="bloque">
      <h3>C. Evaluar progreso</h3>
      <label>1. Â¿QuÃ© tipo de avance es mÃ¡s importante?
        <input type="checkbox" name="C_tipo" value="Motor"> Motor
        <input type="checkbox" name="C_tipo" value="Cognitivo"> Cognitivo
        <input type="checkbox" name="C_tipo" value="ComunicaciÃ³n"> ComunicaciÃ³n
        <input type="checkbox" name="C_tipo" value="AtenciÃ³n"> AtenciÃ³n
        <input type="checkbox" name="C_tipo" value="AutonomÃ­a"> AutonomÃ­a
      </label>
      <label>2. Â¿QuÃ© te gustarÃ­a poder demostrar con datos?
        <input type="checkbox" name="C_datos" value="Mejoras"> Mejoras
        <input type="checkbox" name="C_datos" value="Retrocesos"> Retrocesos
        <input type="checkbox" name="C_datos" value="Estancamiento"> Estancamiento
        <input type="checkbox" name="C_datos" value="ComparaciÃ³n entre sesiones"> ComparaciÃ³n entre sesiones
      </label>
      <label>3. Â¿QuÃ© te impide hacerlo hoy?
        <textarea name="C_impide"></textarea>
      </label>
    </div>

    <div id="bloque-D" class="bloque">
      <h3>D. Comunicar avances</h3>
      <label>1. Â¿Con quiÃ©n es mÃ¡s difÃ­cil comunicar avances?
        <input type="checkbox" name="D_con_quien" value="Padres"> Padres
        <input type="checkbox" name="D_con_quien" value="Escuela"> Escuela
        <input type="checkbox" name="D_con_quien" value="Directivos"> Directivos
        <input type="checkbox" name="D_con_quien" value="Terapeutas"> Terapeutas
      </label>
      <label>2. Â¿QuÃ© tipo de evidencia serÃ­a mÃ¡s Ãºtil?
        <input type="checkbox" name="D_evidencia" value="NÃºmeros"> NÃºmeros
        <input type="checkbox" name="D_evidencia" value="Videos"> Videos
        <input type="checkbox" name="D_evidencia" value="GrÃ¡ficas"> GrÃ¡ficas
        <input type="checkbox" name="D_evidencia" value="Ejemplos"> Ejemplos
      </label>
      <label>3. Â¿QuÃ© deberÃ­a generar Wuupi automÃ¡ticamente?
        <textarea name="D_solucion"></textarea>
      </label>
    </div>

    <!-- 3. ValidaciÃ³n transversal (bloques visibles despuÃ©s de la selecciÃ³n) -->
    <div id="bloque-validacion" class="bloque">
      <h2>3. ValidaciÃ³n transversal</h2>
      <label>4. Para ti, el progreso mÃ¡s importante es que el alumno:
        <input type="checkbox" name="validacion_1" value="Aprenda nuevos conceptos"> Aprenda nuevos conceptos
        <input type="checkbox" name="validacion_1" value="Sea mÃ¡s autÃ³nomo"> Sea mÃ¡s autÃ³nomo
        <input type="checkbox" name="validacion_1" value="InteractÃºe mejor"> InteractÃºe mejor
        <input type="checkbox" name="validacion_1" value="Se comunique mejor"> Se comunique mejor
      </label>
      <label>5. Â¿QuÃ© informaciÃ³n te serÃ­a mÃ¡s Ãºtil tener de tus alumnos?
        <input type="checkbox" name="validacion_2" value="QuÃ© logrÃ³"> QuÃ© logrÃ³
        <input type="checkbox" name="validacion_2" value="En quÃ© tuvo dificultad"> En quÃ© tuvo dificultad
        <input type="checkbox" name="validacion_2" value="Si mejorÃ³ con el tiempo"> Si mejorÃ³ con el tiempo
        <input type="checkbox" name="validacion_2" value="Evidencia visual"> Evidencia visual
      </label>
      <label>6. Â¿CuÃ¡ndo usarÃ­as mÃ¡s Wuupi?
        <input type="checkbox" name="validacion_3" value="Durante la clase"> Durante la clase
        <input type="checkbox" name="validacion_3" value="Al planear"> Al planear
        <input type="checkbox" name="validacion_3" value="Al evaluar"> Al evaluar
        <input type="checkbox" name="validacion_3" value="Para reportar"> Para reportar
      </label>
      <label>7. Â¿DÃ³nde lo usarÃ­as mÃ¡s?
        <input type="checkbox" name="validacion_4" value="Aula"> Aula
        <input type="checkbox" name="validacion_4" value="Casa"> Casa
        <input type="checkbox" name="validacion_4" value="Centro"> Centro
        <input type="checkbox" name="validacion_4" value="Uso mixto"> Uso mixto
      </label>
    </div>

    <!-- 4. Cierre -->
    <div id="bloque-cierre" class="bloque">
      <h2>4. Cierre</h2>
      <label>8. Si Wuupi resolviera tu mayor problema, Â¿quÃ© cambiarÃ­a en tu dÃ­a a dÃ­a?
        <textarea name="cierre_1"></textarea>
      </label>
      <label>9. Â¿Hay algo que Wuupi definitivamente no deberÃ­a hacer en un contexto escolar?
        <textarea name="cierre_2"></textarea>
      </label>
    </div>

    <button type="submit">Enviar encuesta</button>
  </form>

  <iframe name="hidden_iframe" style="display:none;"></iframe>

  <script>
    const form = document.getElementById('wuupi-form');
    const bloques = {
      A: document.getElementById('bloque-A'),
      B: document.getElementById('bloque-B'),
      C: document.getElementById('bloque-C'),
      D: document.getElementById('bloque-D'),
      validacion: document.getElementById('bloque-validacion'),
      cierre: document.getElementById('bloque-cierre')
    };

    // Mostrar bloque segÃºn Dolor Principal
    form.dolor_principal.forEach(radio => {
      radio.addEventListener('change', () => {
        Object.values(bloques).forEach(b => b.style.display = 'none'); // ocultar todo
        bloques[radio.value].style.display = 'block'; // mostrar bloque A-D
        bloques.validacion.style.display = 'block'; // mostrar validaciÃ³n
        bloques.cierre.style.display = 'block'; // mostrar cierre
      });
    });

    // Mensaje de envÃ­o exitoso
    form.addEventListener('submit', (e) => {
      e.preventDefault();
      const actionUrl = form.action;
      const data = new FormData(form);
      const obj = {};
      data.forEach((value, key) => {
        if(obj[key]) { 
          if(Array.isArray(obj[key])) { obj[key].push(value); } 
          else { obj[key] = [obj[key], value]; } 
        } else { obj[key] = value; }
      });
      fetch(actionUrl, {
        method: 'POST',
        body: JSON.stringify(obj),
        headers: {'Content-Type': 'application/json'}
      }).then(r => r.text())
        .then(() => alert('âœ… Encuesta enviada correctamente. Â¡Gracias!'))
        .catch(() => alert('âŒ Error al enviar el formulario.'));
    });
  </script>
</body>
</html>
